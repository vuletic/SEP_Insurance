!function(){"use strict";angular.module("app",["ui.router","ngAnimate","ng-slide-down","ngSanitize"])}(),function(){"use strict";angular.module("app").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/home"),e.state("core",{url:"/",templateUrl:"Content/angular/app/components/core/core.html",controller:"coreController",controllerAs:"cr"}).state("core.home",{url:"home",templateUrl:"Content/angular/app/components/home/home.html",controller:"homeController",controllerAs:"hc"}).state("core.process",{url:"process",templateUrl:"Content/angular/app/components/process/process.html",controller:"processController",params:{data:null},controllerAs:"pr"}).state("core.about",{url:"about",templateUrl:"Content/angular/app/components/about/about.html",controller:"aboutController",controllerAs:"ac"}).state("core.calculator",{url:"calculator",templateUrl:"Content/angular/app/components/calculator/calculator.html",controller:"calculatorController",controllerAs:"cc"}).state("core.preview",{url:"preview",templateUrl:"Content/angular/app/components/preview/preview.html",controller:"previewController",params:{data:null,info:null},controllerAs:"pc"})}])}(),function(){"use strict";function e(){}angular.module("app").controller("aboutController",e)}(),function(){"use strict";function e(e,t,a,r){var o=this;o.showInsurance=!0,o.showObject=!1,o.showVehicle=!1,o.priceIsCalculated=!1,o.calculatedPrice=0,o.data={},o.data.ageNumberYoung=0,o.data.ageNumberAdult=0,o.data.ageNumberOld=0,o.data.towing=!1,o.data.alternateTransport=!1,o.data.hotel=!1,o.data.repair=!1,o.data.sport=!1,o.showErrors=!1,o.countYoungTouchedValue=!1,o.countAdultTouchedValue=!1,o.countOldTouchedValue=!1,o.currentDate=new Date,o.nextDate=new Date,o.objectJustExpanded=!0,o.enableObject=!1,o.enableVehicle=!1,t.getSports().then(function(e){o.sports=e,o.data.selectedSport=o.sports[0].Id_Rizik}),t.getAgeGroups().then(function(e){o.ageGroups=e}),t.getLocations().then(function(e){o.locations=e,o.data.selectedLocation=o.locations[0].Id_Rizik}),t.getInsuranceAmounts().then(function(e){o.insuranceAmounts=e,o.data.selectedInsuranceAmount=o.insuranceAmounts[0].Id_Rizik}),t.getRealEstateAges().then(function(e){o.realEstateAges=e,o.data.selectedRealEstateAge=o.realEstateAges[0].Id_Rizik}),t.getRealEstateValues().then(function(e){o.realEstateValues=e,o.data.selectedRealEstateValue=o.realEstateValues[0].Id_Rizik}),t.getTowingDistances().then(function(e){o.towingDistances=e,o.data.selectedTowingDistance=o.towingDistances[0].Id_Rizik}),t.getAlternateTransportationDistances().then(function(e){o.alternateTransportationDistances=e,o.data.selectedAlternateTransportationDistance=o.alternateTransportationDistances[0].Id_Rizik}),t.getReparationPrices().then(function(e){o.reparationPrices=e,o.data.selectedReparationPrice=o.reparationPrices[0].Id_Rizik}),t.getHotelDays().then(function(e){o.hotelDays=e,o.data.selectedHotelDays=o.hotelDays[0].Id_Rizik}),o.calculate=function(){o.everythingIsValid()&&(o.data.realEstateInsured=o.enableObject,o.data.carInsured=o.enableVehicle,o.data.enableSport=o.data.sport,o.priceIsCalculated=!0,a.sendCalculateData(o.data).then(function(e){o.calculatedPrice=e}),e.calculatorForm.$setPristine())},o.proceedToProcess=function(){o.data.realEstateInsured=o.enableObject,o.data.carInsured=o.enableVehicle,r.go("core.process",{data:o.data})},o.everythingIsValid=function(){return o.checkPeopleCount(),o.enableObject&&(o.validateObjectOptions(),o.objectJustExpanded=!1),o.enableVehicle&&o.validateVehicleOptions(),e.calculatorForm.$valid?(o.showErrors=!1,!0):(o.showErrors=!0,e.calculatorForm.nameDateFrom.$valid&&e.calculatorForm.nameDateTo.$valid&&e.calculatorForm.nameCountYoung.$valid||(o.showInsurance=!0),o.enableObject&&(e.calculatorForm.nameObjectFire.$valid&&e.calculatorForm.nameObjectSize.$valid||(o.showObject=!0)),o.enableVehicle&&(e.calculatorForm.nameVehicleTransport.$valid||(o.showVehicle=!0)),!1)},o.disableObjects=function(){o.objectJustExpanded=!0,o.data.residenceSize="",o.data.residenceFromFlood=!1,o.data.residenceFromFire=!1,o.data.residenceFromTheft=!1,o.data.selectedRealEstateAge=o.realEstateAges[0].Id_Rizik,o.data.selectedRealEstateValue=o.realEstateValues[0].Id_Rizik,e.calculatorForm.nameObjectFlood.$setValidity("chooseObject",!0),e.calculatorForm.nameObjectFire.$setValidity("chooseObject",!0),e.calculatorForm.nameObjectTheft.$setValidity("chooseObject",!0)},o.disableVehicles=function(){o.data.towing=!1,o.data.repair=!1,o.data.hotel=!1,o.data.alternateTransport=!1,o.data.selectedTowingDistance=o.towingDistances[0].Id_Rizik,o.data.selectedReparationPrice=o.reparationPrices[0].Id_Rizik,o.data.selectedHotelDays=o.hotelDays[0].Id_Rizik,o.data.selectedAlternateTransportationDistance=o.alternateTransportationDistances[0].Id_Rizik,e.calculatorForm.nameVehicleTowing.$setValidity("chooseVehicle",!0),e.calculatorForm.nameVehicleRepair.$setValidity("chooseVehicle",!0),e.calculatorForm.nameVehicleHotel.$setValidity("chooseVehicle",!0),e.calculatorForm.nameVehicleTransport.$setValidity("chooseVehicle",!0)},o.checkPeopleCount=function(){var t=o.data.ageNumberYoung+o.data.ageNumberAdult+o.data.ageNumberOld;t<=0?(e.calculatorForm.nameCountYoung.$setValidity("sum",!1),e.calculatorForm.nameCountAdult.$setValidity("sum",!1),e.calculatorForm.nameCountOld.$setValidity("sum",!1)):(e.calculatorForm.nameCountYoung.$setValidity("sum",!0),e.calculatorForm.nameCountAdult.$setValidity("sum",!0),e.calculatorForm.nameCountOld.$setValidity("sum",!0))},o.peopleCountChanged=function(){(o.showErrors||o.countYoungTouchedValue&&o.countAdultTouchedValue&&o.countOldTouchedValue)&&o.checkPeopleCount()},o.countYoungTouched=function(){o.countYoungTouchedValue=!0,o.countAdultTouchedValue&&o.countOldTouchedValue&&o.checkPeopleCount()},o.countAdultTouched=function(){o.countAdultTouchedValue=!0,o.countYoungTouchedValue&&o.countOldTouchedValue&&o.checkPeopleCount()},o.countOldTouched=function(){o.countOldTouchedValue=!0,o.countYoungTouchedValue&&o.countAdultTouchedValue&&o.checkPeopleCount()},o.changeStartDate=function(){o.nextDate.setDate(o.data.dateFrom.getDate()+1)},o.objectRequiredShow=function(){return o.showErrors&&!o.objectJustExpanded},o.validateObjectOptions=function(){o.data.residenceFromFlood||o.data.residenceFromFire||o.data.residenceFromTheft?o.enableObject&&(e.calculatorForm.nameObjectFlood.$setValidity("chooseObject",!0),e.calculatorForm.nameObjectFire.$setValidity("chooseObject",!0),e.calculatorForm.nameObjectTheft.$setValidity("chooseObject",!0)):o.enableObject&&(e.calculatorForm.nameObjectFlood.$setValidity("chooseObject",!1),e.calculatorForm.nameObjectFire.$setValidity("chooseObject",!1),e.calculatorForm.nameObjectTheft.$setValidity("chooseObject",!1))},o.validateVehicleOptions=function(){o.data.alternateTransport||o.data.hotel||o.data.repair||o.data.towing?o.enableVehicle&&(e.calculatorForm.nameVehicleTowing.$setValidity("chooseVehicle",!0),e.calculatorForm.nameVehicleRepair.$setValidity("chooseVehicle",!0),e.calculatorForm.nameVehicleHotel.$setValidity("chooseVehicle",!0),e.calculatorForm.nameVehicleTransport.$setValidity("chooseVehicle",!0)):o.enableVehicle&&(e.calculatorForm.nameVehicleTowing.$setValidity("chooseVehicle",!1),e.calculatorForm.nameVehicleRepair.$setValidity("chooseVehicle",!1),e.calculatorForm.nameVehicleHotel.$setValidity("chooseVehicle",!1),e.calculatorForm.nameVehicleTransport.$setValidity("chooseVehicle",!1))}}angular.module("app").controller("calculatorController",e),e.$inject=["$scope","dataAccessService","calculatorService","$state"]}(),function(){"use strict";function e(e){function t(t){var a="https://sepruleapi.azurewebsites.net/calculator";return e.post(a,t).then(function(e){return e.data})}return{sendCalculateData:t}}angular.module("app").service("calculatorService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t){var a=this;a.localize=function(t){e.getLocalizationObj(t).then(function(e){a.l10nObj=e,"english"==a.l10nObj.lng?a.lang=1:a.lang=0})},a.scroll=function(){t.scrollTo(0,240)},a.localize("srpski")}angular.module("app").controller("coreController",e),e.$inject=["localization","$window"]}(),function(){"use strict";function e(e){this.getLocalizationObj=function(t){return e.get("https://infinite-meadow-14263.herokuapp.com/languages/"+t).then(function(e){return e.data})}}angular.module("app").service("localization",e),e.$inject=["$http"]}(),function(){"use strict";function e(){var e=this;e.home="Home"}angular.module("app").controller("homeController",e)}(),function(){"use strict";function e(e,t,a,r,o){var n=this;if(null==t.data||null==t.info)return void a.go("core.home");n.data={},n.info={},n.dateFrom="",n.dateTo="",n.customers={},n.carrier={},n.object={},n.vehicle={},n.showObject=!1,n.showVehicle=!1,n.data=t.data,n.info=t.info;var i=new Date(n.data.ro.Datum_od),s=new Date(n.data.ro.Datum_do);n.dateFrom=i.getDate()+"."+(i.getMonth()+1)+"."+i.getFullYear()+".",n.dateTo=s.getDate()+"."+(s.getMonth()+1)+"."+s.getFullYear()+".",n.customers=n.info.customers.filter(function(e){return null!=e&&null!=e.passport}),n.carrier=n.data.ro.Stavka_u_realizaciji.filter(function(e){return 1==e.Nosilac_Stavka_u_realiziciji&&null!=e.Osoba}),n.carrier=n.carrier[0].Osoba,n.object=n.data.ro.Stavka_u_realizaciji.filter(function(e){return null!=e.Nekretnina}),0!=n.object.length&&(n.object=n.object[0].Nekretnina,n.showObject=!0),n.vehicle=n.data.ro.Stavka_u_realizaciji.filter(function(e){return null!=e.Vozilo}),0!=n.vehicle.length&&(n.vehicle=n.vehicle[0].Vozilo,n.showVehicle=!0),n.trustDangerousSnippet=function(){return r.trustAsHtml(n.data.pp_button)},o.scrollTo(0,220),n.change=function(){n.info.realEstateInsured=n.showObject,n.info.carInsured=n.showVehicle,n.info.enableSport=n.info.sport,a.go("core.process",{data:n.info})},n.cancel=function(){a.go("core.home")},e.getAgeGroups().then(function(e){n.ageGroups=e,n.ageGroup0=n.ageGroups[0].Id_Rizik,n.ageGroup1=n.ageGroups[1].Id_Rizik,n.ageGroup2=n.ageGroups[2].Id_Rizik}),e.getRisk(n.info.selectedLocation).then(function(e){n.location=e[0]}),e.getRisk(n.info.selectedInsuranceAmount).then(function(e){n.ammount=e[0]}),e.getRisk(n.info.selectedSport).then(function(e){n.sport=e[0]}),e.getRisk(n.info.selectedRealEstateAge).then(function(e){n.objectAge=e[0]}),e.getRisk(n.info.selectedRealEstateValue).then(function(e){n.objectValue=e[0]}),e.getRisk(n.info.selectedTowingDistance).then(function(e){n.vehicleTowing=e[0]}),e.getRisk(n.info.selectedReparationPrice).then(function(e){n.vehicleRepair=e[0]}),e.getRisk(n.info.selectedHotelDays).then(function(e){n.veicleHotel=e[0]}),e.getRisk(n.info.selectedAlternateTransportationDistance).then(function(e){n.vehicleAlternative=e[0]})}angular.module("app").controller("previewController",e),e.$inject=["dataAccessService","$stateParams","$state","$sce","$window"]}(),function(){"use strict";function e(e,t,a,r,o){var n=this;n.jmbgRegex=/^(((0[1-9]|[12]\d|3[01])(0[13578]|1[02])((9|\d)\d{2}))|((0[1-9]|[12]\d|30)(0[13456789]|1[012])((9|\d)\d{2}))|((0[1-9]|1\d|2[0-8])02((9|\d)\d{2}))|(2902(([6-9]|\d)(0[48]|[2468][048]|[13579][26])|((6|[048]|[26])00))))([0-8][0-9]|9[0-6])([0-9]{3})(\d)$/,n.data={},n.data.showObjectInsurance=!1,n.data.showVehicleInsurance=!1,n.data.sport=!1,n.data.ageNumberYoung=0,n.data.ageNumberAdult=0,n.data.ageNumberOld=0,n.data.towing=!1,n.data.alternateTransport=!1,n.data.hotel=!1,n.data.repair=!1,n.data.tempEmail="",n.data.insuranceCarrierIsNotInsured=!1,n.useDefaultData=!0,n.data.vehicle={},n.data.obj={},null!=r.data?(n.data=r.data,n.data.showObjectInsurance=n.data.realEstateInsured,n.data.showVehicleInsurance=n.data.carInsured,n.data.sport=n.data.enableSport,n.useDefaultData=!1,null==n.data.customers&&(n.data.customers=[])):(n.data.customers=[],n.data.customersFilter=[]),n.finishProcess=function(){if(n.everythingIsValidFinal()){var e={};e.dateFrom=n.data.dateFrom,e.dateTo=n.data.dateTo,e.location=n.data.selectedLocation,e.insuranceAmount=n.data.selectedInsuranceAmount,n.data.sport?e.selectedSport=n.data.selectedSport:e.selectedSport=-1,e.customers=[];for(var t=0;t<n.data.customers.length;t++){var r=n.data.customers[t],i={};i.osoba={},i.osoba.JMBG_Osoba=r.jmbg,i.osoba.Ime_Osoba=r.name,i.osoba.Prezime_Osoba=r.surname,i.osoba.Broj_pasosa_Osoba=r.passport,i.osoba.Adresa_Osoba=r.street+" "+r.addresNum+", "+r.city,r.phoneNum&&(i.osoba.Broj_telefona_Osoba=r.phoneNum),i.ageGroup=r.ageGroup,i.insured=!0,i.carrier=!1,e.customers.push(i)}if(n.data.insuranceCarrierIsNotInsured){var i={};i.osoba={},i.osoba.JMBG_Osoba=n.data.insCarrierNI.jmbg,i.osoba.Ime_Osoba=n.data.insCarrierNI.name,i.osoba.Prezime_Osoba=n.data.insCarrierNI.surname,i.osoba.Adresa_Osoba=n.data.insCarrierNI.address.street+" "+n.data.insCarrierNI.address.number+", "+n.data.insCarrierNI.address.city,i.osoba.Broj_telefona_Osoba=n.data.insCarrierNI.phoneNum,i.osoba.E_mail_Osoba=n.data.insCarrierNI.email,i.ageGroup=-1,i.insured=!1,i.carrier=!0,e.customers.push(i)}else{var s=n.data.insCarrierI;e.customers[s].osoba.E_mail_Osoba=n.data.tempEmail,e.customers[s].carrier=!0}n.data.showObjectInsurance?(e.objectData={},e.objectData.obj={},e.objectData.obj.Id_Osigurani_entitet=-1,e.objectData.obj.JMBG_vlasnik_Nekretnina=n.data.object.owner.jmbg,e.objectData.obj.Adresa_Nekretnina=n.data.object.address.street+" "+n.data.object.address.number+", "+n.data.object.address.city,e.objectData.obj.Ime_vlasnik_Nekretnina=n.data.object.owner.name,e.objectData.obj.Prezime_vlasnik_Nekretnina=n.data.object.owner.surname,e.objectData.obj.Povrsina_Nekretnina=n.data.residenceSize,e.objectData.age=n.data.selectedRealEstateAge,e.objectData.value=n.data.selectedRealEstateValue,n.data.residenceFromFlood?e.objectData.flood=!0:e.objectData.flood=!1,n.data.residenceFromFire?e.objectData.fire=!0:e.objectData.fire=!1,n.data.residenceFromTheft?e.objectData.theft=!0:e.objectData.theft=!1):e.objectData=null,n.data.showVehicleInsurance?(e.vehicleData={},e.vehicleData.vehicle={},e.vehicleData.vehicle.Id_Osigurani_entitet=-1,e.vehicleData.vehicle.JMBG_Vlasnik_Vozilo=n.data.vehicle.customer.jmbg,e.vehicleData.vehicle.Ime_Vlasnik_Vozilo=n.data.vehicle.customer.name,e.vehicleData.vehicle.Prezime_Vlasnik_Vozilo=n.data.vehicle.customer.surname,e.vehicleData.vehicle.Broj_sasije_Vozilo=n.data.vehicle.chassisNumber,e.vehicleData.vehicle.Broj_registarske_tablice_Vozilo=n.data.vehicle.registrationNumber,e.vehicleData.vehicle.Godina_proizvodnje_Vozilo=n.data.vehicle.productionYear,n.data.towing?e.vehicleData.tow=n.data.selectedTowingDistance:e.vehicleData.tow=-1,n.data.repair?e.vehicleData.repair=n.data.selectedReparationPrice:e.vehicleData.repair=-1,n.data.hotel?e.vehicleData.accom=n.data.selectedHotelDays:e.vehicleData.accom=-1,n.data.alternateTransport?e.vehicleData.ride=n.data.selectedAlternateTransportationDistance:e.vehicleData.ride=-1):e.vehicleData=null,console.log(e),a.finalizeProcess(e).then(function(e){o.go("core.preview",{data:e,info:n.data})})}},n.selectedProcessPanel=[!0,!1,!1,!1,!1],t.getSports().then(function(e){n.sports=e,n.useDefaultData?n.data.selectedSport=n.sports[0].Id_Rizik:(n.selectedSports=n.sports.filter(function(e){return e.Id_Rizik==n.data.selectedSport}),n.data.selectedSport=n.selectedSports[0].Id_Rizik)}),t.getAgeGroups().then(function(e){n.ageGroups=e}),t.getLocations().then(function(e){n.locations=e,n.useDefaultData?n.data.selectedLocation=n.locations[0].Id_Rizik:(n.selectedLocations=n.locations.filter(function(e){return e.Id_Rizik==n.data.selectedLocation}),n.data.selectedLocation=n.selectedLocations[0].Id_Rizik)}),t.getInsuranceAmounts().then(function(e){n.insuranceAmounts=e,n.useDefaultData?n.data.selectedInsuranceAmount=n.insuranceAmounts[0].Id_Rizik:(n.selectedInsuranceAmounts=n.insuranceAmounts.filter(function(e){return e.Id_Rizik==n.data.selectedInsuranceAmount}),n.data.selectedInsuranceAmount=n.selectedInsuranceAmounts[0].Id_Rizik)}),t.getRealEstateAges().then(function(e){n.realEstateAges=e,n.useDefaultData?n.data.selectedRealEstateAge=n.realEstateAges[0].Id_Rizik:(n.selectedRealEstateAges=n.realEstateAges.filter(function(e){return e.Id_Rizik==n.data.selectedRealEstateAge}),n.data.selectedRealEstateAge=n.selectedRealEstateAges[0].Id_Rizik)}),t.getRealEstateValues().then(function(e){n.realEstateValues=e,n.useDefaultData?n.data.selectedRealEstateValue=n.realEstateValues[0].Id_Rizik:(n.selectedRealEstateValues=n.realEstateValues.filter(function(e){return e.Id_Rizik==n.data.selectedRealEstateValue}),n.data.selectedRealEstateValue=n.selectedRealEstateValues[0].Id_Rizik)}),t.getTowingDistances().then(function(e){n.towingDistances=e,n.useDefaultData?n.data.selectedTowingDistance=n.towingDistances[0].Id_Rizik:(n.selectedTowingDistances=n.towingDistances.filter(function(e){return e.Id_Rizik==n.data.selectedTowingDistance}),n.data.selectedTowingDistance=n.selectedTowingDistances[0].Id_Rizik)}),t.getAlternateTransportationDistances().then(function(e){n.alternateTransportationDistances=e,n.useDefaultData?n.data.selectedAlternateTransportationDistance=n.alternateTransportationDistances[0].Id_Rizik:(n.selectedAlternateTransportationDistances=n.alternateTransportationDistances.filter(function(e){return e.Id_Rizik==n.data.selectedAlternateTransportationDistance}),n.data.selectedAlternateTransportationDistance=n.selectedAlternateTransportationDistances[0].Id_Rizik)}),t.getReparationPrices().then(function(e){n.reparationPrices=e,n.useDefaultData?n.data.selectedReparationPrice=n.reparationPrices[0].Id_Rizik:(n.selectedReparationPrices=n.reparationPrices.filter(function(e){return e.Id_Rizik==n.data.selectedReparationPrice}),n.data.selectedReparationPrice=n.selectedReparationPrices[0].Id_Rizik)}),t.getHotelDays().then(function(e){n.hotelDays=e,n.useDefaultData?n.data.selectedHotelDays=n.hotelDays[0].Id_Rizik:(n.selectedHotelDayss=n.hotelDays.filter(function(e){return e.Id_Rizik==n.data.selectedHotelDays}),n.data.selectedHotelDays=n.selectedHotelDayss[0].Id_Rizik)}),n.validAge=function(e){if(13!=e.length)return!1;var t=parseInt(e.substring(0,2)),a=parseInt(e.substring(2,4))-1,r=(0==e[4]?"2":"1")+e.substring(4,7),o=parseInt(r)+18,n=new Date(o,a,t),i=new Date;return!(i.getTime()<n.getTime())},n.currentDate=new Date,n.nextDate=new Date,n.showErrorsFirst=!1,n.changeStartDate=function(){n.nextDate.setDate(n.data.dateFrom.getDate()+1)},n.goFromFirstPage=function(){!n.everythingIsValidFirst(),n.selectedProcessPanel=[!1,!0,!1,!1,!1]},n.everythingIsValidFirst=function(){return e.firstPageForm.$valid?(n.showErrorsFirst=!1,!0):(n.showErrorsFirst=!0,!1)},n.showErrorsSecond=!1,n.goFromSecondPage=function(){!n.everythingIsValidSecond(),n.selectedProcessPanel=[!1,!1,!0,!1,!1]},n.everythingIsValidSecond=function(){return void 0==n.data||void 0==n.data.customers?(n.showErrorsSecond=!0,!1):0==n.data.customers.length?(n.showErrorsSecond=!0,!1):(n.showErrorsSecond=!1,!0)},n.showErrorsThird=!1,n.goFromThirdPage=function(){n.data.showObjectInsurance&&!n.everythingIsValidThird()||(n.selectedProcessPanel=[!1,!1,!1,!0,!1])},n.everythingIsValidThird=function(){return n.data.showObjectInsurance&&(n.validateObjectOptions(),n.validateObjectJmbg()),e.thirdPageForm.$valid?(n.showErrorsThird=!1,!0):(n.showErrorsThird=!0,!1)},n.validateObjectJmbg=function(){void 0!=n.data.object&&void 0!=n.data.object.owner&&void 0!=n.data.object.owner.jmbg&&(n.validAge(n.data.object.owner.jmbg)?e.thirdPageForm.nameObjectJmbg.$setValidity("jmbg",!0):e.thirdPageForm.nameObjectJmbg.$setValidity("jmbg",!1))},n.validateObjectOptions=function(){n.data.residenceFromFlood||n.data.residenceFromFire||n.data.residenceFromTheft?(e.thirdPageForm.nameObjectFlood.$setValidity("chooseObject",!0),e.thirdPageForm.nameObjectFire.$setValidity("chooseObject",!0),e.thirdPageForm.nameObjectTheft.$setValidity("chooseObject",!0)):(e.thirdPageForm.nameObjectFlood.$setValidity("chooseObject",!1),e.thirdPageForm.nameObjectFire.$setValidity("chooseObject",!1),e.thirdPageForm.nameObjectTheft.$setValidity("chooseObject",!1))},n.disableObjects=function(){n.showErrorsThird=!1,n.data.residenceFromFlood=!1,n.data.residenceFromFire=!1,n.data.residenceFromTheft=!1,n.data.selectedRealEstateAge=n.realEstateAges[0].Id_Rizik,n.data.selectedRealEstateValue=n.realEstateValues[0].Id_Rizik,n.data.residenceSize="",n.data.object={},e.thirdPageForm.nameObjectFlood.$setValidity("chooseObject",!0),e.thirdPageForm.nameObjectFire.$setValidity("chooseObject",!0),e.thirdPageForm.nameObjectTheft.$setValidity("chooseObject",!0),e.thirdPageForm.nameObjectJmbg.$setValidity("validJmbg",!0)},n.showErrorsFourth=!1,n.chooseCarrierDisabled=!1,n.currentYear=(new Date).getFullYear(),n.goFromFourthPage=function(){n.filterForCarriers(),n.data.showVehicleInsurance&&!n.everythingIsValidFourth()||(n.selectedProcessPanel=[!1,!1,!1,!1,!0])},n.everythingIsValidFourth=function(){return n.data.showVehicleInsurance&&(n.validateVehicleOptions(),n.validateVehicleJmbg()),e.fourthPageForm.$valid?(n.showErrorsFourth=!1,!0):(n.showErrorsFourth=!0,!1)},n.validateVehicleJmbg=function(){void 0!=n.data.vehicle&&void 0!=n.data.vehicle.customer&&void 0!=n.data.vehicle.customer.jmbg&&(n.validAge(n.data.vehicle.customer.jmbg)?e.fourthPageForm.nameVehicleJmbg.$setValidity("jmbg",!0):e.fourthPageForm.nameVehicleJmbg.$setValidity("jmbg",!1))},n.validateVehicleOptions=function(){n.data.alternateTransport||n.data.hotel||n.data.repair||n.data.towing?(e.fourthPageForm.nameVehicleTowing.$setValidity("chooseVehicle",!0),e.fourthPageForm.nameVehicleRepair.$setValidity("chooseVehicle",!0),e.fourthPageForm.nameVehicleHotel.$setValidity("chooseVehicle",!0),e.fourthPageForm.nameVehicleTransport.$setValidity("chooseVehicle",!0)):(e.fourthPageForm.nameVehicleTowing.$setValidity("chooseVehicle",!1),e.fourthPageForm.nameVehicleRepair.$setValidity("chooseVehicle",!1),e.fourthPageForm.nameVehicleHotel.$setValidity("chooseVehicle",!1),e.fourthPageForm.nameVehicleTransport.$setValidity("chooseVehicle",!1))},n.disableVehicles=function(){n.showErrorsFourth=!1,n.data.towing=!1,n.data.repair=!1,n.data.hotel=!1,n.data.alternateTransport=!1,n.data.selectedTowingDistance=n.towingDistances[0].Id_Rizik,n.data.selectedAlternateTransportationDistance=n.alternateTransportationDistances[0].Id_Rizik,n.data.selectedReparationPrice=n.reparationPrices[0].Id_Rizik,n.data.selectedHotelDays=n.hotelDays[0].Id_Rizik,n.data.towing=!1,n.data.repair=!1,n.data.hotel=!1,n.data.alternateTransport=!1,n.data.vehicle={},e.fourthPageForm.nameVehicleJmbg.$setValidity("jmbg",!0),e.fourthPageForm.nameVehicleTowing.$setValidity("chooseVehicle",!0),e.fourthPageForm.nameVehicleRepair.$setValidity("chooseVehicle",!0),e.fourthPageForm.nameVehicleHotel.$setValidity("chooseVehicle",!0),e.fourthPageForm.nameVehicleTransport.$setValidity("chooseVehicle",!0)},n.filterForCarriers=function(){n.data.customersFilter=n.data.customers.filter(function(e){return"0"!=e.category}),0==n.data.customersFilter.length?(n.data.insuranceCarrierIsNotInsured=!0,n.chooseCarrierDisabled=!0):(n.chooseCarrierDisabled=!1,n.data.insCarrierI="0")},n.showErrorsFinal=!1,n.everythingIsValidFinal=function(){return n.validateCarrierJmbg(),e.finalPageForm.$valid?(n.showErrorsFinal=!1,!0):(n.showErrorsFinal=!0,!1)},n.validateCarrierJmbg=function(){void 0!=n.data.insCarrierNI&&void 0!=n.data.insCarrierNI.jmbg&&(n.validAge(n.data.insCarrierNI.jmbg)?e.finalPageForm.nameJmbgNew.$setValidity("jmbg",!0):e.finalPageForm.nameJmbgNew.$setValidity("jmbg",!1))},n.switchCarrier=function(){n.showErrorsFinal=!1,n.data.insuranceCarrierIsNotInsured?(n.data.tempEmail="",n.data.insCarrierI="0",e.finalPageForm.nameEmailIncluded.$setUntouched()):(e.finalPageForm.nameJmbgNew.$setValidity("jmbg",!0),e.finalPageForm.nameNameNew.$setUntouched(),e.finalPageForm.nameSurnameNew.$setUntouched(),e.finalPageForm.nameJmbgNew.$setUntouched(),e.finalPageForm.nameStreetNew.$setUntouched(),e.finalPageForm.nameNumberNew.$setUntouched(),e.finalPageForm.nameCityNew.$setUntouched(),e.finalPageForm.namePhoneNew.$setUntouched(),e.finalPageForm.nameEmailNew.$setUntouched(),n.data.insCarrierNI={})}}angular.module("app").controller("processController",e),e.$inject=["$scope","dataAccessService","processService","$stateParams","$state"]}(),function(){"use strict";function e(e){this.finalizeProcess=function(t){return e.post("api/finalize",t).then(function(e){return e.data})}}angular.module("app").service("processService",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){var t={restrict:"E",transclude:!0,templateUrl:"../Content/angular/app/directives/expander_simple/expander-simple.html",scope:{showExpander:"="}};return t}angular.module("app").directive("expanderSimple",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,t){var a={restrict:"E",transclude:!1,templateUrl:"../Content/angular/app/directives/insurees_table/insurees-table.html",scope:{insurees:"=",localization:"=",processError:"=",jmbgPattern:"="},link:function(e,a,r,o){var n=e;n.tempCustomer={},n.selected=-1,n.editProcess=!1,n.changeTypeHeader="",n.changeTypeFooter="",t.getAgeGroups().then(function(e){n.categories=e,n.tempCustomer.category="0"}),n.addCustomer=function(){n.clear(),n.changeTypeHeader=n.localization.l10nObj.prsPg2HeadAdd,n.changeTypeFooter=n.localization.l10nObj.prsPg2FootAdd},n.deleteCustomer=function(){n.selected!=-1&&n.insurees.splice(n.selected,1)},n.editCustomer=function(){if(n.selected!=-1){n.changeTypeHeader=n.localization.l10nObj.prsPg2HeadChange,n.changeTypeFooter=n.localization.l10nObj.prsPg2FootChange,n.editProcess=!0;var e=n.insurees[n.selected];n.tempCustomer=JSON.parse(JSON.stringify(e))}},n.selectCustomer=function(e){n.selected!=-1&&(n.insurees[n.selected].cssClass="not_selected"),n.insurees[e].cssClass="selected",n.selected=e},n.commit=function(){if(n.insureeIsValid()){var e=JSON.parse(JSON.stringify(n.tempCustomer));e.ageGroup=n.categories[e.category].Id_Rizik,n.editProcess?(n.insurees.splice(n.selected,1,e),n.editProcess=!1):(e.cssClass="not_selected",n.insurees.push(e)),n.clear(),$("#dataModal").modal("hide")}},n.clear=function(){n.selected!=-1&&(n.insurees[n.selected].cssClass="not_selected",n.selected=-1),n.tempCustomer={},n.tempCustomer.jmbg="",n.tempCustomer.passport="",n.tempCustomer.addresNum="",n.tempCustomer.phoneNum="",n.tempCustomer.category="0",n.clearValidation()},n.showErrorsInsuree=!1,n.insureeIsValid=function(){return n.validInsureeGroup(),n.insureeForm.$valid?(n.showErrorsInsuree=!1,!0):(n.showErrorsInsuree=!0,!1)},n.validInsureeGroup=function(){if(void 0!=n.tempCustomer&&void 0!=n.tempCustomer.jmbg){var e=n.tempCustomer.jmbg,t=0,a=0;if("0"==n.tempCustomer.category)t=0,a=18;else if("1"==n.tempCustomer.category)t=18,a=65;else{if("2"!=n.tempCustomer.category)return!1;t=65,a=111}n.validAge(e,t,a)?n.insureeForm.nameGroup.$setValidity("group",!0):n.insureeForm.nameGroup.$setValidity("group",!1)}},n.validAge=function(e,t,a){var r=parseInt(e.substring(0,2)),o=parseInt(e.substring(2,4))-1,n=(0==e[4]?"2":"1")+e.substring(4,7),i=parseInt(n)+t,s=parseInt(n)+a,c=new Date(i,o,r),l=new Date(s,o,r),d=new Date;return c.getTime()<d.getTime()&&d.getTime()<l.getTime()},n.clearValidation=function(){n.showErrorsInsuree=!1,n.insureeForm.nameGroup.$setValidity("group",!0),n.insureeForm.nameJmbg.$setValidity("jmbg",!0),n.insureeForm.nameName.$setUntouched(),n.insureeForm.nameSurname.$setUntouched(),n.insureeForm.nameJmbg.$setUntouched(),n.insureeForm.namePassport.$setUntouched(),n.insureeForm.nameStreet.$setUntouched(),n.insureeForm.nameNumber.$setUntouched(),n.insureeForm.nameCity.$setUntouched(),n.insureeForm.nameTelephone.$setUntouched(),n.insureeForm.nameGroup.$setUntouched()}}};return a}angular.module("app").directive("insureesTable",e),e.$inject=["$http","dataAccessService"]}(),function(){"use strict";function e(e){var t={restrict:"E",templateUrl:"../Content/angular/app/directives/page_marker/page-marker.html",scope:{selectedPage:"="}};return t}angular.module("app").directive("pageMarker",e),e.$inject=["$http"]}(),function(){"use strict";function e(e){function t(){var t="api/rizik/vrsta/1";return e.get(t).then(function(e){return e.data})}function a(){var t="api/rizik/vrsta/2";return e.get(t).then(function(e){return e.data})}function r(){var t="api/rizik/vrsta/4";return e.get(t).then(function(e){return e.data})}function o(){var t="api/rizik/vrsta/5";return e.get(t).then(function(e){return e.data})}function n(){var t="api/rizik/vrsta/7";return e.get(t).then(function(e){return e.data})}function i(){var t="api/rizik/vrsta/12";return e.get(t).then(function(e){return e.data})}function s(){var t="api/rizik/vrsta/13";return e.get(t).then(function(e){return e.data})}function c(){var t="api/rizik/vrsta/14";return e.get(t).then(function(e){return e.data})}function l(){var t="api/rizik/vrsta/15";return e.get(t).then(function(e){return e.data})}function d(){var t="api/rizik/vrsta/16";return e.get(t).then(function(e){return e.data})}function u(t){var a="api/rizik/id/"+t;return e.get(a).then(function(e){return e.data})}return{getSports:t,getAgeGroups:a,getLocations:r,getInsuranceAmounts:o,getRealEstateAges:n,getRealEstateValues:i,getTowingDistances:s,getReparationPrices:c,getAlternateTransportationDistances:l,getHotelDays:d,getRisk:u}}angular.module("app").service("dataAccessService",e),e.$inject=["$http"]}();